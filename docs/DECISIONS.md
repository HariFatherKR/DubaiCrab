# 📋 OpenKlaw - 의사결정 기록

> **Version:** 0.1 MVP  
> **최종 업데이트:** 2025-02-07

---

## 📊 리서치 vs PRD 분석

### 일치 항목 ✅

| PRD 항목 | 리서치 검증 | 결론 |
|----------|------------|------|
| 로컬 AI 실행 | 대기업/공공기관 90%+ 외부 AI 차단 | ✅ 핵심 가치 유지 |
| HWP 지원 | 경쟁사 전무, 시장 80%+ HWP 사용 | ✅ 최우선 차별화 |
| 원클릭 설치 | 비개발자 설치 허들이 도입 최대 장벽 | ✅ P0 유지 |
| 이메일 작성 | 주 5-8시간 소요, AI 자동화 가능성 최상 | ✅ P0 유지 |
| 시스템 트레이 | 빠른 접근 필수, 항상 상주 필요 | ✅ P0 유지 |

### 조정 필요 항목 🔄

| PRD 항목 | 리서치 발견 | 조정 |
|----------|------------|------|
| 회의록 정리 | 음성→텍스트 필요 (Whisper) | P1 → P2로 이동 (MVP 범위 축소) |
| 엑셀 분석 | 중요하지만 복잡도 높음 | P1 유지, Phase 2에서 구현 |
| 문서 검색 (RAG) | 니즈 있지만 MVP 과부하 | P2 유지 |

### 신규 발견 ➕

| 항목 | 리서치 근거 | 결정 |
|------|------------|------|
| 대화 저장/로드 | 업무 연속성, 히스토리 검색 니즈 | P0에 추가 |
| 한국어 모델 선택 | Qwen2.5-3B가 최적 밸런스 | 기본 모델 확정 |
| 설치 시간 목표 | "5분 내 첫 대화" 중요 | KR 유지 |

---

## 🎯 최종 우선순위

### P0 - MVP 필수 (Phase 4-5)

| ID | 기능 | 상세 | 예상 시간 |
|----|------|------|----------|
| F01 | **원클릭 설치** | Windows exe + macOS npm | 1일 |
| F02 | **Ollama 자동 설정** | 설치 확인 + 모델 다운로드 | 0.5일 |
| F03 | **기본 채팅** | 텍스트 입력 → 스트리밍 응답 | 1일 |
| F04 | **HWP 요약** | 파일 드롭 → 요약 텍스트 | 1일 |
| F05 | **이메일 작성** | 상황 입력 → 초안 생성 | 0.5일 |
| F06 | **대화 저장** | 세션별 자동 저장, 목록 표시 | 0.5일 |
| F07 | **시스템 트레이** | 트레이 아이콘, 클릭으로 열기 | 0.5일 |

**총 예상 시간: 5일 (순수 개발)**

### P1 - Should Have (Phase 6 이후)

| ID | 기능 | 비고 |
|----|------|------|
| F08 | Excel/CSV 분석 | 데이터 요약 |
| F09 | 빠른 작업 버튼 | 자주 쓰는 스킬 원클릭 |
| F10 | 전역 단축키 | 어디서든 호출 |
| F11 | 다크 모드 | UI |

### P2 - Nice to Have

| ID | 기능 | 비고 |
|----|------|------|
| F12 | 음성 입력 (Whisper) | Whisper.cpp 필요 |
| F13 | 문서 검색 (RAG) | 복잡도 높음 |
| F14 | 모델 전환 UI | 여러 모델 선택 |
| F15 | 회의록 정리 | 음성 전사 필요 |

---

## 🏗️ 기술 결정

### 확정된 스택

| 구성요소 | 결정 | 이유 |
|----------|------|------|
| **Desktop Framework** | Tauri | 경량 (vs Electron 10x), Rust 안정성 |
| **Frontend** | SvelteKit | 빠름, 가벼움, 학습곡선 낮음 |
| **LLM Runtime** | Ollama | 쉬운 설치, API 표준, 활발한 개발 |
| **기본 모델** | Qwen2.5-3B-Instruct | 한국어 성능, 경량, 빠른 추론 |
| **HWP 파서** | pyhwp (Python) | 유일한 안정적 HWP 파서 |
| **데이터 저장** | SQLite | 경량, 로컬, 검색 지원 (FTS5) |

### 미결정 (Phase 4에서 확정)

| 항목 | 후보 | 결정 시점 |
|------|------|----------|
| Windows 설치 패키지 | NSIS vs MSI | Phase 6 |
| 로고/아이콘 | 🦞 크랩 테마? | Phase 6 |

---

## 📁 개발 Phase 재정의

### Phase 4: 프로젝트 초기화 (Developer)

1. Tauri 프로젝트 생성 (`src/tauri/`)
2. SvelteKit 설정 (`src/web/`)
3. 프로젝트 루트 package.json 설정
4. Ollama 클라이언트 래퍼
5. 기본 채팅 UI (입력 → 응답)
6. `pnpm run validate` 통과

### Phase 5: 핵심 기능 (Developer)

1. 시스템 트레이 구현
2. HWP 파싱 연동 (pyhwp subprocess)
3. 이메일 작성 스킬
4. 대화 저장/로드 (SQLite)
5. `pnpm run validate` 통과

### Phase 6: 설치 패키지 (Developer)

1. Windows NSIS 설치 패키지
2. macOS npm 설치 설정
3. Ollama 자동 설치 스크립트
4. 모델 자동 다운로드 로직

### Phase 7: QA 테스트

1. 전체 기능 테스트
2. Windows 설치 테스트
3. macOS npm 설치 테스트
4. 버그 수정 및 문서화

---

## 🚦 Go/No-Go 기준

### MVP 출시 기준

- [ ] Windows 설치 → 5분 내 첫 대화 성공
- [ ] macOS `npm install -g openklaw` → 5분 내 첫 대화 성공
- [ ] HWP 파일 요약 정상 동작
- [ ] 이메일 초안 생성 정상 동작
- [ ] 대화 저장/로드 정상 동작
- [ ] 시스템 트레이에서 앱 열기 정상

### 릴리스 블로커

- 설치 실패율 > 20%
- 응답 속도 > 30초 (첫 토큰)
- 치명적 버그 미해결

---

## 📝 의사결정 로그

| 날짜 | 결정 | 이유 | 담당 |
|------|------|------|------|
| 2025-02-07 | Tauri 선택 | Electron 대비 10x 경량, Rust 안정성 | Tech |
| 2025-02-07 | Qwen2.5-3B 기본 모델 | 한국어 성능/크기 최적 밸런스 | Tech |
| 2025-02-07 | 회의록 기능 P2로 이동 | MVP 범위 축소, Whisper 의존성 | PM |
| 2025-02-07 | 대화 저장 P0 추가 | 업무 연속성 필수 | PM |

---

**Phase 3 완료 일시**: 2025-02-07
